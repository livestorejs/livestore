#!/usr/bin/env bash

# In CI, direnv should fail on errors; locally it can be lenient
CI=${CI:-0}
if [ "${CI}" = "1" ] || [ "${CI}" = "true" ] || [ "${CI}" = "yes" ]; then
  strict_env
fi

# Load .envrc.local (parent first for worktrees), then current dir overrides
if test -f ../.envrc.local; then
  source_env ../.envrc.local
fi
if test -f ./.envrc.local; then
  source_env ./.envrc.local
fi

eval "$(devenv direnvrc)"
use devenv