---
title: Expo
description: How to setup Expo for LiveStore.
---

import { Steps, Tabs, TabItem } from '@astrojs/starlight/components';


<Steps>

1.  Set up project via:
	```
	# .terminal
	npx tiged --mode=git https://github.com/livestorejs/livestore/examples/expo-app my-app
	```
	Replace `my-app` with the name of your app.

2. Install dependencies

	It's strongly recommended to use `pnpm` for the simplest and most reliable dependency setup.
 
	<Tabs syncKey="package-manager">
		<TabItem label="pnpm">
			`pnpm install --node-linker=hoisted`
		
			Make sure to use `--node-linker=hoisted` when installing dependencies in your project or add it to your `.npmrc` file.
			```
			# .npmrc
			nodeLinker=hoisted
			```

			Hopefully Expo will also support non-hoisted setups in the future.
		</TabItem>
		<TabItem label="npm">
			Given `npm` doesn't automatically install peer dependencies you'll also need to also install the following peer dependencies:
			```
			npm install @effect/experimental @effect/opentelemetry @effect/platform @effect/platform-browser @effect/schema @opentelemetry/api effect
			```

			Going forward you can use `npm install` again to install the dependencies.
		</TabItem>
		<TabItem label="yarn">
			When using `yarn`, make sure you're using Yarn 4 or higher with the `node-modules` linker.

			```
			yarn set version stable
			yarn config set nodeLinker node-modules
			yarn install
			```

			Additionally, given `yarn` doesn't automatically install peer dependencies you'll also need to install the following peer dependencies:
			```
			yarn add @effect/experimental @effect/opentelemetry @effect/platform @effect/platform-browser @effect/schema @opentelemetry/api effect
			```
		</TabItem>
	</Tabs>

3. Set `export RCT_NEW_ARCH_ENABLED=1` in your shell to enable the new React Native architecture (required for transactional state updates). 

	Pro tip: You can use [direnv](https://direnv.net/) to manage environment variables.

4. Run dev environment

	<Tabs syncKey="package-manager">
		<TabItem label="pnpm">
			`pnpm ios` or `pnpm android`
		</TabItem>
		<TabItem label="npm">
			`npm run ios` or `npm run android`
		</TabItem>
		<TabItem label="yarn">
			`yarn ios` or `yarn android`
		</TabItem>
	</Tabs>

5. You can also press `Shift+m` to open the LiveStore devtools

</Steps>

## Custom builds

If you need a custom build, you could run `pnpm expo run:ios` or `pnpm expo run:android` to build the app locally.

## Database location

### With Expo Go

Run `open $(find $(xcrun simctl get_app_container booted host.exp.Exponent data) -path "*/Documents/ExponentExperienceData/*livestore-expo*" -print -quit)/SQLite` to open the database in Finder.

### With custom builds

The app SQLite database is stored in the app's `Library` directory (e.g. `/Users/<USERNAME>/Library/Developer/CoreSimulator/Devices/<DEVICE_ID>/data/Containers/Data/Application/<APP_ID>/Documents/SQLite/app.db`)

Run `open $(xcrun simctl get_app_container booted dev.livestore.livestore-expo data)/Documents/SQLite` to open the directory in Finder

## Further notes

- Until Expo properly supports PNPM we also need the following
  - Some workarounds in `metro.config.js` + `@babel/runtime` in `package.json`
- LiveStore doesn't yet support Expo Web (see [#130](https://github.com/livestorejs/livestore/issues/130))